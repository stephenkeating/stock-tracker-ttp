{"ast":null,"code":"// API CONSTANTS\nconst BASE_URL = 'http://localhost:3000';\nconst USERS_URL = BASE_URL + '/users';\nconst PERSIST_URL = BASE_URL + '/auth';\nconst LOGIN_URL = BASE_URL + '/login';\n\nconst SPECIFIC_USER_URL = id => USERS_URL + '/' + id;\n\nconst TRANSACTIONS_URL = BASE_URL + '/transactions';\nconst IEX_API_URL = 'https://sandbox.iexapis.com/stable/';\nconst IEX_TOKEN = process.env.REACT_APP_IEX_API_TOKEN;\nconst IEX_SANDBOX_SECRET_TOKEN = process.env.REACT_APP_IEX_SANDBOX_SECRET_TOKEN; // Redux Actions\n\nconst setUserAction = userObj => {\n  // console.log(userObj)\n  return {\n    type: 'SET_USER',\n    payload: userObj\n  };\n};\n\nconst clearUserAction = () => ({\n  type: 'CLEAR_USER'\n}); // Fetch\n// Pattern without error Handling:\n// const newUserToDB = userObj => dispatch => {\n//   const config = {\n//     method: 'POST',\n//     headers: {\n//       'Content-Type': 'application/json'\n//     },\n//     body: JSON.stringify(userObj)\n//   };\n//   fetch(USERS_URL, config)\n//     .then(r => r.json())\n//     .then(data => {\n//       dispatch(setUserAction(data.user));\n//       localStorage.setItem('token', data.token);\n//     });\n// };\n// Pattern with error Handling:\n\n\nconst newUserToDB = userObj => {\n  const config = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userObj)\n  };\n  return fetch(USERS_URL, config).then(r => r.json());\n};\n\nconst deleteUserFromDB = userId => dispatch => {\n  const config = {\n    method: 'DELETE'\n  };\n  fetch(SPECIFIC_USER_URL(userId), config).then(r => {\n    dispatch(clearUserAction());\n    localStorage.clear();\n  });\n}; // Pattern without error Handling:\n// const loginUserToDB = userCredentials => dispatch => {\n//   const config = {\n//     method: 'POST',\n//     headers: {\n//       'Content-Type': 'application/json'\n//     },\n//     body: JSON.stringify(userCredentials)\n//   };\n//   fetch(LOGIN_URL, config)\n//     .then(r => r.json())\n//     .then(data => {\n//       dispatch(setUserAction(data.user));\n//       localStorage.setItem('token', data.token);\n//     })\n// };\n// Pattern with error Handling:\n\n\nconst loginUserToDB = userCredentials => {\n  const config = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userCredentials)\n  };\n  return fetch(LOGIN_URL, config).then(r => r.json());\n};\n\nconst persistUser = () => dispatch => {\n  const config = {\n    method: 'GET',\n    headers: {\n      Authorization: `bearer ` + localStorage.token\n    }\n  };\n  fetch(PERSIST_URL, config).then(r => r.json()).then(data => {\n    console.log(data);\n    dispatch(setUserAction(data));\n  });\n};\n\nconst logoutUser = () => dispatch => {\n  dispatch(clearUserAction());\n  localStorage.clear();\n};\n\nexport default {\n  newUserToDB,\n  deleteUserFromDB,\n  loginUserToDB,\n  persistUser,\n  logoutUser,\n  setUserAction\n};","map":{"version":3,"sources":["/Users/stephenkeating/Development/code/stock-tracker-ttp/frontend/src/redux/actions.js"],"names":["BASE_URL","USERS_URL","PERSIST_URL","LOGIN_URL","SPECIFIC_USER_URL","id","TRANSACTIONS_URL","IEX_API_URL","IEX_TOKEN","process","env","REACT_APP_IEX_API_TOKEN","IEX_SANDBOX_SECRET_TOKEN","REACT_APP_IEX_SANDBOX_SECRET_TOKEN","setUserAction","userObj","type","payload","clearUserAction","newUserToDB","config","method","headers","body","JSON","stringify","fetch","then","r","json","deleteUserFromDB","userId","dispatch","localStorage","clear","loginUserToDB","userCredentials","persistUser","Authorization","token","data","console","log","logoutUser"],"mappings":"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","sourcesContent":["// API CONSTANTS\n\nconst BASE_URL = 'http://localhost:3000';\nconst USERS_URL = BASE_URL + '/users';\nconst PERSIST_URL = BASE_URL + '/auth';\nconst LOGIN_URL = BASE_URL + '/login';\nconst SPECIFIC_USER_URL = id => USERS_URL + '/' + id;\nconst TRANSACTIONS_URL = BASE_URL + '/transactions';\n\nconst IEX_API_URL = 'https://sandbox.iexapis.com/stable/'\nconst IEX_TOKEN = process.env.REACT_APP_IEX_API_TOKEN\nconst IEX_SANDBOX_SECRET_TOKEN = process.env.REACT_APP_IEX_SANDBOX_SECRET_TOKEN\n\n// Redux Actions\n\nconst setUserAction = userObj => {\n  // console.log(userObj)\n  return {\n    type: 'SET_USER',\n    payload: userObj\n  }\n};\n\nconst clearUserAction = () => ({\n  type: 'CLEAR_USER'\n});\n\n// Fetch\n\n// Pattern without error Handling:\n// const newUserToDB = userObj => dispatch => {\n//   const config = {\n//     method: 'POST',\n//     headers: {\n//       'Content-Type': 'application/json'\n//     },\n//     body: JSON.stringify(userObj)\n//   };\n//   fetch(USERS_URL, config)\n//     .then(r => r.json())\n//     .then(data => {\n//       dispatch(setUserAction(data.user));\n//       localStorage.setItem('token', data.token);\n//     });\n// };\n\n// Pattern with error Handling:\nconst newUserToDB = userObj => {\n  const config = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userObj)\n  };\n  return fetch(USERS_URL, config)\n    .then(r => r.json())\n};\n\nconst deleteUserFromDB = userId => dispatch => {\n  const config = {\n    method: 'DELETE'\n  };\n  fetch(SPECIFIC_USER_URL(userId), config).then(r => {\n    dispatch(clearUserAction());\n    localStorage.clear();\n  });\n};\n\n// Pattern without error Handling:\n// const loginUserToDB = userCredentials => dispatch => {\n//   const config = {\n//     method: 'POST',\n//     headers: {\n//       'Content-Type': 'application/json'\n//     },\n//     body: JSON.stringify(userCredentials)\n//   };\n//   fetch(LOGIN_URL, config)\n//     .then(r => r.json())\n//     .then(data => {\n//       dispatch(setUserAction(data.user));\n//       localStorage.setItem('token', data.token);\n//     })\n// };\n\n// Pattern with error Handling:\nconst loginUserToDB = userCredentials => {\n  const config = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(userCredentials)\n  };\n  return fetch(LOGIN_URL, config)\n    .then(r => r.json())\n};\n\nconst persistUser = () => dispatch => {\n  const config = {\n    method: 'GET',\n    headers: {\n      Authorization: `bearer ` + localStorage.token\n    }\n  };\n  fetch(PERSIST_URL, config)\n    .then(r => r.json())\n    .then(data => {\n      console.log(data)\n      dispatch(setUserAction(data));\n    });\n};\n\nconst logoutUser = () => dispatch => {\n  dispatch(clearUserAction());\n  localStorage.clear();\n};\n\nexport default {\n  newUserToDB,\n  deleteUserFromDB,\n  loginUserToDB,\n  persistUser,\n  logoutUser,\n  setUserAction\n};"]},"metadata":{},"sourceType":"module"}